import React from 'react';
import {useWindowDimensions, View} from 'react-native';
import Animated, {
  useAnimatedProps,
  useSharedValue,
  withTiming,
} from 'react-native-reanimated';
import Svg, {
  G,
  Circle,
  Defs,
  LinearGradient,
  Stop,
  Ellipse,
} from 'react-native-svg';
import {BLUE_50, BLUE_700, BLUE_A200} from '../../constants/colors';
import {calculateHeight, calculateWidth} from '../../constants/dimensions';
import AnimatedStroke from './components/AnimatedStroke';
import styles from './styles';

const AnimatedEllipse = Animated.createAnimatedComponent(Ellipse);
const AnimatedCircle = Animated.createAnimatedComponent(Circle);

export default function HomeScreen() {
  const {width, height} = useWindowDimensions();

  const progress = useSharedValue(0);

  React.useEffect(() => {
    progress.value = withTiming(1, {duration: 3000});
  }, []);

  const animationProps = useAnimatedProps(() => {
    return {
      strokeDashoffset: 600 - 600 * progress.value,
    };
  });

  const animationCircleProps = useAnimatedProps(() => {
    return {
      r: 15 * progress.value,
    };
  });

  return (
    <View style={styles.container}>
      <Svg
        width={width}
        height={height}
        fill={'none'}
        viewBox={`0 0 ${width} ${height}`}>
        <G
          translateX={calculateWidth(10)}
          translateY={calculateHeight(200)}
          stroke={BLUE_A200}>
          <G translateY={-calculateHeight(70)}>
            <AnimatedStroke path="M118.045 48V1.45454H127.886V20.6591H147.864V1.45454H157.682V48H147.864V28.7727H127.886V48H118.045Z" />
            <AnimatedStroke path="M181.523 48.6818C177.932 48.6818 174.841 47.9545 172.25 46.5C169.674 45.0303 167.689 42.9545 166.295 40.2727C164.902 37.5758 164.205 34.3864 164.205 30.7045C164.205 27.1136 164.902 23.9621 166.295 21.25C167.689 18.5379 169.652 16.4242 172.182 14.9091C174.727 13.3939 177.712 12.6364 181.136 12.6364C183.439 12.6364 185.583 13.0076 187.568 13.75C189.568 14.4773 191.311 15.5758 192.795 17.0455C194.295 18.5152 195.462 20.3636 196.295 22.5909C197.129 24.803 197.545 27.3939 197.545 30.3636V33.0227H168.068V27.0227H188.432C188.432 25.6288 188.129 24.3939 187.523 23.3182C186.917 22.2424 186.076 21.4015 185 20.7955C183.939 20.1742 182.705 19.8636 181.295 19.8636C179.826 19.8636 178.523 20.2045 177.386 20.8864C176.265 21.553 175.386 22.4545 174.75 23.5909C174.114 24.7121 173.788 25.9621 173.773 27.3409V33.0455C173.773 34.7727 174.091 36.2652 174.727 37.5227C175.379 38.7803 176.295 39.75 177.477 40.4318C178.659 41.1136 180.061 41.4545 181.682 41.4545C182.758 41.4545 183.742 41.303 184.636 41C185.53 40.697 186.295 40.2424 186.932 39.6364C187.568 39.0303 188.053 38.2879 188.386 37.4091L197.341 38C196.886 40.1515 195.955 42.0303 194.545 43.6364C193.152 45.2273 191.348 46.4697 189.136 47.3636C186.939 48.2424 184.402 48.6818 181.523 48.6818Z" />
            <AnimatedStroke path="M213.545 1.45454V48H203.864V1.45454H213.545Z" />
            <AnimatedStroke path="M230.983 1.45454V48H221.301V1.45454H230.983Z" />
            <AnimatedStroke path="M254.511 48.6818C250.981 48.6818 247.928 47.9318 245.352 46.4318C242.792 44.9167 240.814 42.8106 239.42 40.1136C238.027 37.4015 237.33 34.2576 237.33 30.6818C237.33 27.0758 238.027 23.9242 239.42 21.2273C240.814 18.5152 242.792 16.4091 245.352 14.9091C247.928 13.3939 250.981 12.6364 254.511 12.6364C258.042 12.6364 261.087 13.3939 263.648 14.9091C266.223 16.4091 268.208 18.5152 269.602 21.2273C270.996 23.9242 271.693 27.0758 271.693 30.6818C271.693 34.2576 270.996 37.4015 269.602 40.1136C268.208 42.8106 266.223 44.9167 263.648 46.4318C261.087 47.9318 258.042 48.6818 254.511 48.6818ZM254.557 41.1818C256.163 41.1818 257.504 40.7273 258.58 39.8182C259.655 38.8939 260.466 37.6364 261.011 36.0455C261.572 34.4545 261.852 32.6439 261.852 30.6136C261.852 28.5833 261.572 26.7727 261.011 25.1818C260.466 23.5909 259.655 22.3333 258.58 21.4091C257.504 20.4848 256.163 20.0227 254.557 20.0227C252.936 20.0227 251.572 20.4848 250.466 21.4091C249.375 22.3333 248.549 23.5909 247.989 25.1818C247.443 26.7727 247.17 28.5833 247.17 30.6136C247.17 32.6439 247.443 34.4545 247.989 36.0455C248.549 37.6364 249.375 38.8939 250.466 39.8182C251.572 40.7273 252.936 41.1818 254.557 41.1818Z" />
          </G>
          <AnimatedStroke path="M1.04546 51V4.45455H19.4091C22.9242 4.45455 25.9242 5.08334 28.4091 6.34091C30.9091 7.58334 32.8106 9.34849 34.1136 11.6364C35.4318 13.9091 36.0909 16.5833 36.0909 19.6591C36.0909 22.75 35.4242 25.4091 34.0909 27.6364C32.7576 29.8485 30.8258 31.5455 28.2955 32.7273C25.7803 33.9091 22.7349 34.5 19.1591 34.5H6.86364V26.5909H17.5682C19.447 26.5909 21.0076 26.3333 22.25 25.8182C23.4924 25.303 24.4167 24.5303 25.0227 23.5C25.6439 22.4697 25.9545 21.1894 25.9545 19.6591C25.9545 18.1136 25.6439 16.8106 25.0227 15.75C24.4167 14.6894 23.4849 13.8864 22.2273 13.3409C20.9849 12.7803 19.4167 12.5 17.5227 12.5H10.8864V51H1.04546ZM26.1818 29.8182L37.75 51H26.8864L15.5682 29.8182H26.1818Z" />
          <AnimatedStroke path="M58.2102 51.6818C54.6193 51.6818 51.5284 50.9545 48.9375 49.5C46.3617 48.0303 44.3769 45.9546 42.983 43.2727C41.589 40.5758 40.892 37.3864 40.892 33.7045C40.892 30.1136 41.589 26.9621 42.983 24.25C44.3769 21.5379 46.339 19.4242 48.8693 17.9091C51.4148 16.3939 54.3996 15.6364 57.8239 15.6364C60.1269 15.6364 62.2708 16.0076 64.2557 16.75C66.2557 17.4773 67.9981 18.5758 69.483 20.0455C70.983 21.5152 72.1496 23.3636 72.983 25.5909C73.8163 27.803 74.233 30.3939 74.233 33.3636V36.0227H44.7557V30.0227H65.1193C65.1193 28.6288 64.8163 27.3939 64.2102 26.3182C63.6042 25.2424 62.7633 24.4015 61.6875 23.7955C60.6269 23.1742 59.392 22.8636 57.983 22.8636C56.5133 22.8636 55.2102 23.2045 54.0739 23.8864C52.9527 24.553 52.0739 25.4545 51.4375 26.5909C50.8011 27.7121 50.4754 28.9621 50.4602 30.3409V36.0455C50.4602 37.7727 50.7784 39.2652 51.4148 40.5227C52.0663 41.7803 52.983 42.75 54.1648 43.4318C55.3466 44.1136 56.7481 44.4545 58.3693 44.4545C59.4451 44.4545 60.4299 44.303 61.3239 44C62.2178 43.697 62.983 43.2424 63.6193 42.6364C64.2557 42.0303 64.7405 41.2879 65.0739 40.4091L74.0284 41C73.5739 43.1515 72.642 45.0303 71.233 46.6364C69.839 48.2273 68.036 49.4697 65.8239 50.3636C63.6269 51.2424 61.089 51.6818 58.2102 51.6818Z" />
          <AnimatedStroke path="M90.5057 51.6591C88.2784 51.6591 86.2936 51.2727 84.5511 50.5C82.8087 49.7121 81.4299 48.553 80.4148 47.0227C79.4148 45.4773 78.9148 43.553 78.9148 41.25C78.9148 39.3106 79.2708 37.6818 79.983 36.3636C80.6951 35.0455 81.6648 33.9849 82.892 33.1818C84.1193 32.3788 85.5133 31.7727 87.0739 31.3636C88.6496 30.9545 90.3011 30.6667 92.0284 30.5C94.0587 30.2879 95.6951 30.0909 96.9375 29.9091C98.1799 29.7121 99.0814 29.4242 99.642 29.0455C100.203 28.6667 100.483 28.1061 100.483 27.3636V27.2273C100.483 25.7879 100.028 24.6742 99.1193 23.8864C98.2254 23.0985 96.9527 22.7045 95.3011 22.7045C93.5587 22.7045 92.1723 23.0909 91.142 23.8636C90.1117 24.6212 89.4299 25.5758 89.0966 26.7273L80.142 26C80.5966 23.8788 81.4905 22.0455 82.8239 20.5C84.1572 18.9394 85.8769 17.7424 87.983 16.9091C90.1042 16.0606 92.5587 15.6364 95.3466 15.6364C97.286 15.6364 99.142 15.8636 100.915 16.3182C102.703 16.7727 104.286 17.4773 105.665 18.4318C107.059 19.3864 108.157 20.6136 108.96 22.1136C109.763 23.5985 110.165 25.3788 110.165 27.4545V51H100.983V46.1591H100.71C100.15 47.25 99.3996 48.2121 98.4602 49.0455C97.5208 49.8636 96.392 50.5076 95.0739 50.9773C93.7557 51.4318 92.233 51.6591 90.5057 51.6591ZM93.2784 44.9773C94.7027 44.9773 95.9602 44.697 97.0511 44.1364C98.142 43.5606 98.9981 42.7879 99.6193 41.8182C100.241 40.8485 100.551 39.75 100.551 38.5227V34.8182C100.248 35.0152 99.8314 35.197 99.3011 35.3636C98.786 35.5152 98.2027 35.6591 97.5511 35.7955C96.8996 35.9167 96.2481 36.0303 95.5966 36.1364C94.9451 36.2273 94.3542 36.3106 93.8239 36.3864C92.6875 36.553 91.6951 36.8182 90.8466 37.1818C89.9981 37.5455 89.339 38.0379 88.8693 38.6591C88.3996 39.2652 88.1648 40.0227 88.1648 40.9318C88.1648 42.25 88.6421 43.2576 89.5966 43.9545C90.5663 44.6364 91.7936 44.9773 93.2784 44.9773Z" />
          <AnimatedStroke path="M133.449 51.6818C129.873 51.6818 126.797 50.9242 124.222 49.4091C121.661 47.8788 119.691 45.7576 118.312 43.0455C116.949 40.3333 116.267 37.2121 116.267 33.6818C116.267 30.1061 116.956 26.9697 118.335 24.2727C119.729 21.5606 121.706 19.447 124.267 17.9318C126.828 16.4015 129.873 15.6364 133.403 15.6364C136.449 15.6364 139.116 16.1894 141.403 17.2955C143.691 18.4015 145.502 19.9545 146.835 21.9545C148.169 23.9545 148.903 26.303 149.04 29H139.903C139.646 27.2576 138.964 25.8561 137.858 24.7955C136.767 23.7197 135.335 23.1818 133.562 23.1818C132.062 23.1818 130.752 23.5909 129.631 24.4091C128.525 25.2121 127.661 26.3864 127.04 27.9318C126.419 29.4773 126.108 31.3485 126.108 33.5455C126.108 35.7727 126.411 37.6667 127.017 39.2273C127.638 40.7879 128.509 41.9773 129.631 42.7955C130.752 43.6136 132.062 44.0227 133.562 44.0227C134.669 44.0227 135.661 43.7955 136.54 43.3409C137.434 42.8864 138.169 42.2273 138.744 41.3636C139.335 40.4849 139.722 39.4318 139.903 38.2045H149.04C148.888 40.8712 148.161 43.2197 146.858 45.25C145.57 47.2652 143.79 48.8409 141.517 49.9773C139.244 51.1136 136.555 51.6818 133.449 51.6818Z" />
          <AnimatedStroke path="M173.807 16.0909V23.3636H152.784V16.0909H173.807ZM157.557 7.72728H167.239V40.2727C167.239 41.1667 167.375 41.8636 167.648 42.3636C167.92 42.8485 168.299 43.1894 168.784 43.3864C169.284 43.5833 169.86 43.6818 170.511 43.6818C170.966 43.6818 171.42 43.6439 171.875 43.5682C172.33 43.4773 172.678 43.4091 172.92 43.3636L174.443 50.5682C173.958 50.7197 173.277 50.8939 172.398 51.0909C171.519 51.303 170.451 51.4318 169.193 51.4773C166.86 51.5682 164.814 51.2576 163.057 50.5455C161.314 49.8333 159.958 48.7273 158.989 47.2273C158.019 45.7273 157.542 43.8333 157.557 41.5455V7.72728Z" />
          <AnimatedStroke path="M234.04 4.45455V51H225.54L205.29 21.7045H204.949V51H195.108V4.45455H203.744L223.835 33.7273H224.244V4.45455H234.04Z" />
          <AnimatedStroke path="M251.943 51.6591C249.716 51.6591 247.731 51.2727 245.989 50.5C244.246 49.7121 242.867 48.553 241.852 47.0227C240.852 45.4773 240.352 43.553 240.352 41.25C240.352 39.3106 240.708 37.6818 241.42 36.3636C242.133 35.0455 243.102 33.9849 244.33 33.1818C245.557 32.3788 246.951 31.7727 248.511 31.3636C250.087 30.9545 251.739 30.6667 253.466 30.5C255.496 30.2879 257.133 30.0909 258.375 29.9091C259.617 29.7121 260.519 29.4242 261.08 29.0455C261.64 28.6667 261.92 28.1061 261.92 27.3636V27.2273C261.92 25.7879 261.466 24.6742 260.557 23.8864C259.663 23.0985 258.39 22.7045 256.739 22.7045C254.996 22.7045 253.61 23.0909 252.58 23.8636C251.549 24.6212 250.867 25.5758 250.534 26.7273L241.58 26C242.034 23.8788 242.928 22.0455 244.261 20.5C245.595 18.9394 247.314 17.7424 249.42 16.9091C251.542 16.0606 253.996 15.6364 256.784 15.6364C258.723 15.6364 260.58 15.8636 262.352 16.3182C264.14 16.7727 265.723 17.4773 267.102 18.4318C268.496 19.3864 269.595 20.6136 270.398 22.1136C271.201 23.5985 271.602 25.3788 271.602 27.4545V51H262.42V46.1591H262.148C261.587 47.25 260.837 48.2121 259.898 49.0455C258.958 49.8636 257.83 50.5076 256.511 50.9773C255.193 51.4318 253.67 51.6591 251.943 51.6591ZM254.716 44.9773C256.14 44.9773 257.398 44.697 258.489 44.1364C259.58 43.5606 260.436 42.7879 261.057 41.8182C261.678 40.8485 261.989 39.75 261.989 38.5227V34.8182C261.686 35.0152 261.269 35.197 260.739 35.3636C260.223 35.5152 259.64 35.6591 258.989 35.7955C258.337 35.9167 257.686 36.0303 257.034 36.1364C256.383 36.2273 255.792 36.3106 255.261 36.3864C254.125 36.553 253.133 36.8182 252.284 37.1818C251.436 37.5455 250.777 38.0379 250.307 38.6591C249.837 39.2652 249.602 40.0227 249.602 40.9318C249.602 42.25 250.08 43.2576 251.034 43.9545C252.004 44.6364 253.231 44.9773 254.716 44.9773Z" />
          <AnimatedStroke path="M297.682 16.0909V23.3636H276.659V16.0909H297.682ZM281.432 7.72728H291.114V40.2727C291.114 41.1667 291.25 41.8636 291.523 42.3636C291.795 42.8485 292.174 43.1894 292.659 43.3864C293.159 43.5833 293.735 43.6818 294.386 43.6818C294.841 43.6818 295.295 43.6439 295.75 43.5682C296.205 43.4773 296.553 43.4091 296.795 43.3636L298.318 50.5682C297.833 50.7197 297.152 50.8939 296.273 51.0909C295.394 51.303 294.326 51.4318 293.068 51.4773C290.735 51.5682 288.689 51.2576 286.932 50.5455C285.189 49.8333 283.833 48.7273 282.864 47.2273C281.894 45.7273 281.417 43.8333 281.432 41.5455V7.72728Z" />
          <AnimatedStroke path="M303.989 51V16.0909H313.67V51H303.989ZM308.852 11.5909C307.413 11.5909 306.178 11.1136 305.148 10.1591C304.133 9.1894 303.625 8.03031 303.625 6.68182C303.625 5.34849 304.133 4.20455 305.148 3.25C306.178 2.28031 307.413 1.79546 308.852 1.79546C310.292 1.79546 311.519 2.28031 312.534 3.25C313.564 4.20455 314.08 5.34849 314.08 6.68182C314.08 8.03031 313.564 9.1894 312.534 10.1591C311.519 11.1136 310.292 11.5909 308.852 11.5909Z" />
          <AnimatedStroke path="M353.972 16.0909L341.767 51H330.858L318.653 16.0909H328.881L336.131 41.0682H336.494L343.722 16.0909H353.972Z" />
          <AnimatedStroke path="M373.71 51.6818C370.119 51.6818 367.028 50.9545 364.438 49.5C361.862 48.0303 359.877 45.9546 358.483 43.2727C357.089 40.5758 356.392 37.3864 356.392 33.7045C356.392 30.1136 357.089 26.9621 358.483 24.25C359.877 21.5379 361.839 19.4242 364.369 17.9091C366.915 16.3939 369.9 15.6364 373.324 15.6364C375.627 15.6364 377.771 16.0076 379.756 16.75C381.756 17.4773 383.498 18.5758 384.983 20.0455C386.483 21.5152 387.65 23.3636 388.483 25.5909C389.316 27.803 389.733 30.3939 389.733 33.3636V36.0227H360.256V30.0227H380.619C380.619 28.6288 380.316 27.3939 379.71 26.3182C379.104 25.2424 378.263 24.4015 377.188 23.7955C376.127 23.1742 374.892 22.8636 373.483 22.8636C372.013 22.8636 370.71 23.2045 369.574 23.8864C368.453 24.553 367.574 25.4545 366.938 26.5909C366.301 27.7121 365.975 28.9621 365.96 30.3409V36.0455C365.96 37.7727 366.278 39.2652 366.915 40.5227C367.566 41.7803 368.483 42.75 369.665 43.4318C370.847 44.1136 372.248 44.4545 373.869 44.4545C374.945 44.4545 375.93 44.303 376.824 44C377.718 43.697 378.483 43.2424 379.119 42.6364C379.756 42.0303 380.241 41.2879 380.574 40.4091L389.528 41C389.074 43.1515 388.142 45.0303 386.733 46.6364C385.339 48.2273 383.536 49.4697 381.324 50.3636C379.127 51.2424 376.589 51.6818 373.71 51.6818Z" />
        </G>
        <AnimatedCircle
          animatedProps={animationCircleProps}
          cx={width / 2}
          cy={height / 1.75}
          fill={BLUE_A200}
          fillRule={'evenodd'}
          fillOpacity={0.8}
        />
        <AnimatedEllipse
          x={width / 2}
          y={height / 1.75}
          rx={120}
          ry={35}
          strokeWidth={2}
          stroke={BLUE_A200}
          rotation={60}
          strokeDasharray={600}
          animatedProps={animationProps}
        />
        <AnimatedEllipse
          x={width / 2}
          y={height / 1.75}
          rx={120}
          ry={35}
          strokeWidth={2}
          stroke={BLUE_A200}
          animatedProps={animationProps}
          rotation={120}
          strokeDasharray={600}
        />
        <AnimatedEllipse
          x={width / 2}
          y={height / 1.75}
          rx={120}
          ry={35}
          strokeWidth={2}
          stroke={BLUE_A200}
          strokeDasharray={600}
          animatedProps={animationProps}
        />
      </Svg>
    </View>
  );
}
